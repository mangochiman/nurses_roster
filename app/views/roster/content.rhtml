<html>
  <head>
    <title></title>
    <%= javascript_include_tag "cookies"%>
    <%= javascript_include_tag "jquery"%>
    <%= javascript_include_tag "jquery-1.10.2"%>
    <%= javascript_include_tag "jquery-ui"%>
    <%= stylesheet_link_tag "jquery-ui"%>

    <script>
      var roster_menu = "<%= @roster_menu %>";
      var nurses_menu = "<%= @nurses_menu %>";
      var users_menu = "<%= @users_menu %>";
      var settings_menu = "<%= @settings_menu %>";
      var extra_settings_menu = "<%= @extra_settings_menu %>";
      
      function loadRosterData(obj){
        //setActiveTab(obj);
        var inner_content = document.getElementById('inner_content');
        html = "<table>";
        <%  @roster_menu.in_groups_of(4).each do |row| %>
            html+="<tr>";
            <% row.each do |caption, image| %>
              <%  next if caption.nil? %>
              <%  next if image.nil? %>
              <% if caption.match(/Create Roster/i) %>
                html+="<td onclick='createRoster();'>";
              <% else %>
                html+="<td>";
              <% end %>
              html+='<%= image_tag("icons/#{image}", :class=>'icon') %>';
              html+="<br />"
              html+="<center><span class='caption'><%=  caption %></span></center"
              html+="</td>";
              html+="<td style='min-width:70px;'>";
              html+="</td>";
            <% end %>
            html+="</tr>";
            html+="<tr style='height: 4em;'>";
            html+="</tr>";
        <% end %>
          html += "</table>";
          inner_content.innerHTML=html;
      }

      function loadNursesData(obj){
        //setActiveTab(obj);
        var inner_content = document.getElementById('inner_content');
        html = "<table>";
        <%  @nurses_menu.in_groups_of(4).each do |row| %>
            html+="<tr>";
            <% row.each do |caption, image| %>
              <%  next if caption.nil? %>
              <%  next if image.nil? %>

              <% if caption.match(/New Nurse/i) %>
                html+="<td onclick='createNewNurse();'>";
              <% elsif caption.match(/Edit Nurse/i) %>
                html+="<td onclick='editNurseMenu();'>";
              <% elsif caption.match(/Import from CSV/i) %>
                html+="<td onclick='importFromCSVmenu();'>";
              <% else %>
                html+="<td>";
              <% end %>
              
              html+='<%= image_tag("icons/#{image}", :class=>'icon') %>';
              html+="<br />"
              html+="<center><span class='caption'><%=  caption %></span></center"
              html+="</td>";
              html+="<td style='min-width:70px;'>";
              html+="</td>";
            <% end %>
            html+="</tr>";
            html+="<tr style='height: 4em;'>";
            html+="</tr>";
        <% end %>
          html += "</table>";
          inner_content.innerHTML=html;
      }

      function loadUsersData(obj){
        //setActiveTab(obj);
        var inner_content = document.getElementById('inner_content');
        html = "<table>";
        <%  @users_menu.in_groups_of(4).each do |row| %>
            html+="<tr>";
            <% row.each do |caption, image| %>
              <%  next if caption.nil? %>
              <%  next if image.nil? %>
              html+="<td>";
              html+='<%= image_tag("icons/#{image}", :class=>'icon') %>';
              html+="<br />"
              html+="<center><span class='caption'><%=  caption %></span></center"
              html+="</td>";
              html+="<td style='min-width:70px;'>";
              html+="</td>";
            <% end %>
            html+="</tr>";
            html+="<tr style='height: 4em;'>";
            html+="</tr>";
        <% end %>
          html += "</table>";
          inner_content.innerHTML=html;
      }

      function loadSettingsData(obj){
        //setActiveTab(obj);
        var inner_content = document.getElementById('inner_content');
        html = "<table>";
        <%  @settings_menu.in_groups_of(4).each do |row| %>
            html+="<tr>";
            <% row.each do |caption, image| %>
              <%  next if caption.nil? %>
              <%  next if image.nil? %>
              <% if caption.match(/Extra Settings/i) %>
                html+="<td onclick='load_extra_settings_menu(this)'>";
              <% else %>
                html+="<td>";
              <% end %>
              
              html+='<%= image_tag("icons/#{image}", :class=>'icon') %>';
              html+="<br />"
              html+="<center><span class='caption'><%=  caption %></span></center"
              html+="</td>";
              html+="<td style='min-width:70px;'>";
              html+="</td>";
            <% end %>
            html+="</tr>";
            html+="<tr style='height: 4em;'>";
            html+="</tr>";
        <% end %>
          html += "</table>";
          inner_content.innerHTML=html;
      }

      function loadHomeData(obj){
        //setActiveTab(obj);
        var inner_content = document.getElementById('inner_content');
        inner_content.innerHTML="";
      }

      function load_extra_settings_menu(obj){
        //setActiveTab(obj);
        var inner_content = document.getElementById('inner_content');
        html = "<table>";
        <%  @extra_settings_menu.in_groups_of(4).each do |row| %>
            html+="<tr>";
            <% row.each do |caption, image| %>
              <%  next if caption.nil? %>
              <%  next if image.nil? %>
              html+="<td>";
              html+='<%= image_tag("icons/#{image}", :class=>'icon') %>';
              html+="<br />"
              html+="<center><span class='caption'><%=  caption %></span></center"
              html+="</td>";
              html+="<td style='min-width:70px;'>";
              html+="</td>";
            <% end %>
            html+="</tr>";
            html+="<tr style='height: 4em;'>";
            html+="</tr>";
        <% end %>
          html += "</table>";
          inner_content.innerHTML=html;
      }
      
      function setActiveTab(obj){
        class_name = obj.getAttribute("class");
        createCookie("active-tab", class_name, 1);
        active_tab = readCookie('active-tab');
        if (active_tab){
          element = document.getElementsByClassName(active_tab)[0];
          atab = document.getElementById('active_tab');
          if (atab){
            atab.removeAttribute('id');
          }
          element.setAttribute("id", 'active_tab');
        }

      }

      function loadActiveTab(){
        active_tab = readCookie('active-tab');
        if (active_tab){
          element = document.getElementsByClassName(active_tab)[0];
          load_function = element.getAttribute('onclick');
          
          atab = document.getElementById('active_tab');
          if (atab){
            atab.removeAttribute('id');
          }
          element.setAttribute("id", 'active_tab');
          eval(load_function);
        }

      }

      function createRoster(){
        var inner_content = document.getElementById('inner_content');
        document.getElementById('shield').style.display='inline';
        html = "<div id='create_roster_menu'>";
        
        html+= "<div id='create_roster_header'>";
        html+="<span style='position:absolute; top:4%; left:14%; top:30%;'>Create Roster</span>";
        html+="</div>";

        html+= "<div id='create_roster_content'>";
        html+="<table style='margin-left: 8%; margin-top: 1%; width:80%;'>"
        html+="<tr><td><span id='input_label'>Start Date</span></td><td><input type='text'  id='start_date' onmousedown='loadDatePicker();'></input></td></tr>";
        html+="<tr style='height:1em;'></tr>"
        html+="<tr><td><span id='input_label'>End Date</span></td><td><input type='text' id='end_date' onmousedown='loadDatePicker();'></input></td></tr>";
        html+="</table>"
        html+="</div>";
        
        html+= "<div id='create_roster_footer'>";
        html+="<span onclick='hideCreateRosterPopup();' id='cancel_button'>Cancel</span>";
        html+="</div>";
        
        html+="</div>";
        inner_content.innerHTML+=html
      }

      function hideCreateRosterPopup(){
        create_roster_menu = document.getElementById('create_roster_menu')
        create_roster_menu.parentNode.removeChild(create_roster_menu);
        document.getElementById('shield').style.display='none';
      }

      function hideCreateNursePopup(){
        create_nurse_menu = document.getElementById('create_nurse_menu')
        create_nurse_menu.parentNode.removeChild(create_nurse_menu);
        document.getElementById('shield').style.display='none';
      }
      
      function loadDatePicker(){
        $( "#start_date" ).datepicker();
        $( "#end_date" ).datepicker();
      }
     function createNewNurse(){
        var inner_content = document.getElementById('inner_content');
        document.getElementById('shield').style.display='inline';
        html = "<div id='create_nurse_menu'>";
        
        html+= "<div id='create_nurse_header'>";
        html+="<span style='position:absolute; left:20%; top:32%;'>Create new nurse</span>";
        html+="</div>";

        html+= "<div id='create_nurse_content'>";
        html+="<table style='margin-left: 20%; margin-top: 8%; width:80%;'>";
        html+="<tr><td>Employee #</td><td><input type='text' name='employee_number'/></td></tr>";
        html+="<tr style='height:1em;'></tr>";
        html+="<tr><td>First Name</td> <td><input type='text' name='first_name'/></td></tr>";
        html+="<tr style='height:1em;'></tr>";
        html+="<tr><td>Last Name</td> <td><input type='text' name='last_name'/></td></tr>";
        html+="<tr style='height:1em;'></tr>";
        html+="<tr><td>Gender</td></tr>";
        html+="<tr style='height:1em;'></tr>";
        html+="<tr><td>Grade</td></tr>";
        html+="</table>"
        html+="</div>";

        html+= "<div id='create_nurse_footer'>";
        html+="<span id='save'>Save</span> <span id='cancel' onclick='hideCreateNursePopup();'>Cancel</span>";
        html+="</div>";

        html+="</div>";
        inner_content.innerHTML+=html
     }

     function editNurseMenu(){
        var inner_content = document.getElementById('inner_content');
        html = "<div id='edit_nurse_menu'>";
        html+= "<div id='left_div'>";
        html+="<table style='position:absolute; width:100%; margin-left:18%;'>";
        html+="<tr><td>Filter </td><td><span><input name='search' type='text' id='search_input'/><img src='/images/icons/clear_02.png' id='clear_image'/></span></td></tr>"
        html+="</table>"
        html+="</div>";
        html+="</div>";
        inner_content.innerHTML=html
     }

     function importFromCSVmenu(){
        var inner_content = document.getElementById('inner_content');
        document.getElementById('shield').style.display='inline';
        html = "<div id='create_csv_menu'>";

        html+= "<div id='create_csv_header'>";
        html+="<span style='position:absolute; top:4%; left:14%; top:30%;'>Browse file</span>";
        html+="</div>";

        html+= "<div id='create_roster_content'>";importFromCSVmenu()
        html+="<table style='margin-left: 8%; margin-top: 1%; width:80%;'>"

        html+="<tr><td><span id='input_label'>Browse file</span></td></tr>";
        
        html+="</table>"
        html+="</div>";

        html+= "<div id='create_roster_footer'>";
        html+="<span onclick='hideCreateCSVPopup();' id='cancel_button'>Cancel</span>";
        html+="</div>";

        html+="</div>";
        inner_content.innerHTML+=html;
     }
     
    </script>
    <style>
      #content{

      }

      #header{
        position: absolute;
        top: 5%;
        border-width: 100%;
        -moz-user-select: none;
      }
      #footer{
        position: absolute;
        bottom: 0%;
        height: 43px;
        width: 100%;
        left: 0%;
        background: url("../images/footer.gif") repeat-x scroll center top black;
        padding: 30px 0 0;
      }
      #horizontal_line{
        position: absolute;
        height: 0%;
        left: 0%;
        top: 10%;
        width: 100%;
        border-bottom: 1px solid green;
      }
 
      .app_name{
        font-size: 20px;
        font-weight: bold;
        margin: 0 0 15px;
        padding: 2px 0 10px;
        color: #336699;
        text-indent: 0;
        margin-left: 68%;
        top: 5%;
      }
      body {
        background-color: #82EFFF;
        background-image: url("../images/bg.jpg");
        background-repeat: repeat-x;
        margin: 0;
      }
      #content{
        position: absolute;
        width: 70%;
        clear: both;
        border-left: 2px solid black;
        border-right: 2px solid black;
        margin-left: 15%;
        height: 100%;
        background-color: white;
      }


      #logout{
        position: absolute;
        background: url("../images/four.gif") repeat-x scroll 0 0 #3C3C3C;
        border-radius: 8px 8px 8px 8px;
        color: #FEFEFE;
        display: inline-block;
        font-size: 19px;
        letter-spacing: -1px;
        line-height: 1.5em;
        padding: 9px 20px 11px;
        right: 2%;
        margin-top: -2%;
        z-index: 1;
      }

      #menu{
        -moz-user-select: none;
        margin-top: 1%;
        margin-left: 60%;
      
      }
      #active_tab{
        border-bottom: 4px solid green;
      }
      .roster, .nurses, .users, .settings, .home{
        cursor:  pointer;
        font: smfontall-caps 18px Georgia, sans-serif;

      }

      #inner_content{
        margin-top: 10%;
        margin-left: 10%;
      }

      .icon{
        cursor: pointer;
      }
      .caption{
         cursor: pointer;
      }

      #shield{
      position: absolute;
      background-color: black;
      width: 100%;
      height: 100%;
      left: 0%;
      top: 0%;
      z-index: 10;
      opacity: 0.87;
    }

    #create_roster_menu, #create_csv_menu{
      z-index: 11;
      position: absolute;
      height: 44%;
      width: 60%;
      top: 20%;
      background-color: white;
      left: 20%;
      border-bottom: 3px solid silver;
    }

    #create_roster_header, #create_csv_header{
      background-color: gray;
      height: 50px;
      width: 100%;
      position: absolute;
      left: 0%;
      border-bottom: 2px solid black;
    }

    #create_roster_content, #create_csv_content{
      position: absolute;
      z-index: 11;
      top: 30%;
      width: 100%;
    }

    #create_roster_content input{
      border: 1px solid black;
      background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
      font-weight: bold;
      float: left;
      font-family: Arial,Helvetica,sans-serif;
      font-size: 14px;
      line-height: 0.5em;
      margin: 0;
      padding: 5px;
      width: 105.5%;
    }
    
    #create_roster_footer{
      background-color: gray;
      height: 50px;
      width: 100%;
      position: absolute;
      width: 100%;
      position: absolute;
      bottom: 0px;
    }

    #input_label {
      font: 18px Georgia, casans-serif;
    }

    #cancel_button{
      background-color: #FFFFFF;
      border: 1px solid #EDEBEB;
      left: 2%;
      padding: 1.5% 43%;
      position: absolute;
      text-decoration: none;
      top: 15%;
      cursor: pointer;
    }

    .calendar_icon{
      cursor: pointer;
    }

    #create_nurse_menu{
      z-index: 11;
      position: absolute;
      height: 75%;
      width: 90%;
      top: 12%;
      background-color: white;
      left: 5%;
      border-bottom: 3px solid silver;
    }

    #create_nurse_header{
      background-color: gray;
      height: 50px;
      width: 100%;
      position: absolute;
      left: 0%;
      border-bottom: 2px solid black;
    }

    #create_ nurse_content input{
      border: 1px solid black;
      background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
      font-weight: bold;
      float: left;
      font-family: Arial,Helvetica,sans-serif;
      font-size: 14px;
      line-height: 0.5em;
      margin: 0;
      padding: 5px;
      width: 105.5%;
    }

    #create_nurse_footer{
      background-color: gray;
      height: 50px;
      width: 100%;
      position: absolute;
      width: 100%;
      position: absolute;
      bottom: 0px;
    }

    #save{
      background-color: #FFFFFF;
      border: 1px solid #EDEBEB;
      left: 2%;
      padding: 1.3% 20%;
      position: absolute;
      text-decoration: none;
      top: 8%;
      cursor: pointer;
    }
    #cancel{
      background-color: #FFFFFF;
      border: 1px solid #EDEBEB;
      right: 2%;
      padding: 1.3% 20%;
      position: absolute;
      text-decoration: none;
      top: 8%;
      cursor: pointer;
    }

    #edit_nurse_menu{
      position: absolute;
      width: 100%;
      left: 0%;
      top: 10.3%;
      height: 80%;
    }

    #left_div{
      position: absolute;
      width: 40%;
      border-right: 4px solid #FEF0C9;
      background-color: #F1EDC2;
      left: 0%;
      height: 100%;
      
    }

    #search_input{
      height: 2em;
    }

    #clear_image{
      position: absolute;
      left: 72%;
      top: 3.5%;
    }
    </style>
  </head>
  <body onload="loadActiveTab();">
    <div id="shield" style="display: none;">

    </div>
    <div id="content">
      
      <div id="header">
        <div id="menu">
          <span class="roster" onclick="loadRosterData(this);" onmousedown="setActiveTab(this)">Roster </span>|
          <span class="nurses" onclick="loadNursesData(this)" onmousedown="setActiveTab(this)">Nurses </span>|
          <span class="users" onclick="loadUsersData(this)" onmousedown="setActiveTab(this)">Users </span>|
          <span class="settings" onclick="loadSettingsData(this)" onmousedown="setActiveTab(this)">Settings </span>|
          <span class="home" onclick="loadHomeData(this)" onmousedown="setActiveTab(this)">Home</span>
        </div>
      </div>
      <!--<div class="app_name">
          <span>Nurses Roster System(NRS)</span>
      </div>-->
      <div id="horizontal_line">
      </div>
      <div id="inner_content">
        
      </div>
      
      <div id="footer">
        <div id="logout">
          <span>logout</span>
        </div>
      </div>
    </div>
  </body>
</html>